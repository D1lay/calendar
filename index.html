<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Календарь</title>
</head>
<body>
    <input type="file" id="fileInput">
    <div id="data"></div>

    <script>
        // Функция для парсинга ICS-данных
        function parseICS(icsData) {
            const lines = icsData.split('\n');
            const events = [];
            let event = {};

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                if (line.startsWith('BEGIN:VEVENT')) {
                    event = {};
                } else if (line.startsWith('END:VEVENT')) {
                    events.push(event);
                } else {
                    const [key, value] = line.split(':');
                    event[key] = value;
                }
            }

            return events;
        }

        // Функция для отображения данных календаря
        function displayData(icsData) {
            const events = parseICS(icsData);

            const dataDiv = document.getElementById('data');
            dataDiv.innerHTML = ''; // Очистка предыдущих данных

            for (const event of events) {
                const eventDiv = document.createElement('div');
                eventDiv.innerHTML = `
                    <strong>${event.SUMMARY}</strong><br>
                    <em>${event.DTSTART}</em><br>
                    ${event.LOCATION}<br>
                    ${event.DESCRIPTION}<br><br>
                `;
                dataDiv.appendChild(eventDiv);
            }
        }

        // Обработчик изменения файла
        document.getElementById('fileInput').addEventListener('change', function (event) {
            const file = event.target.files[0];
            const reader = new FileReader();

            reader.onload = function (e) {
                const icsData = e.target.result;
                displayData(icsData);
            };

            reader.readAsText(file);
        });
    </script>
</body>
</html>
